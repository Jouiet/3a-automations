!function(){"use strict";const e="Hello! I'm the 3A Automation assistant. How can I help you today?",n="Hello! I'm the 3A Automation assistant. Type your question and I'll respond instantly.",t="Ask your question...",a="#4FBAF1",o="#2B6685",i="#10B981",s="#191E35";function r(e,n={}){"function"==typeof gtag&&gtag("event",e,{event_category:"voice_assistant",...n}),"undefined"!=typeof dataLayer&&Array.isArray(dataLayer)&&dataLayer.push({event:e,event_category:"voice_assistant",...n})}let c=!1,l=!1,d=null,u=window.speechSynthesis,p=[];const m="SpeechRecognition"in window||"webkitSpeechRecognition"in window,g="speechSynthesis"in window,f=navigator.userAgent.toLowerCase().includes("firefox"),v=/^((?!chrome|android).)*safari/i.test(navigator.userAgent),y=!m||f||v;function h(){const e=document.createElement("div");e.id="voice-assistant-widget",e.style.cssText="position:fixed;bottom:120px;right:20px;z-index:99999;font-family:Inter,-apple-system,BlinkMacSystemFont,sans-serif;",e.innerHTML=`\n      <style>\n        #voice-assistant-widget {\n          --va-primary: ${a};\n          --va-primary-dark: ${o};\n          --va-accent: ${i};\n          --va-dark: ${s};\n          font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;\n          position: fixed;\n          bottom: 120px;\n          right: 20px;\n          z-index: 99999;\n        }\n        .va-trigger {\n          width: 60px;\n          height: 60px;\n          border-radius: 50%;\n          background: linear-gradient(135deg, var(--va-primary) 0%, var(--va-primary-dark) 50%, var(--va-accent) 100%);\n          border: none;\n          cursor: pointer;\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          box-shadow: 0 4px 20px rgba(79, 186, 241, 0.4);\n          transition: all 0.3s ease;\n          position: relative;\n          animation: pulse-glow 2s ease-in-out infinite;\n        }\n\n        .va-trigger::before {\n          content: '';\n          position: absolute;\n          top: -4px;\n          left: -4px;\n          right: -4px;\n          bottom: -4px;\n          border-radius: 50%;\n          background: linear-gradient(135deg, var(--va-primary), var(--va-accent));\n          opacity: 0;\n          z-index: -1;\n          animation: pulse-ring 2s ease-out infinite;\n        }\n\n        .va-trigger::after {\n          content: '';\n          position: absolute;\n          top: -8px;\n          left: -8px;\n          right: -8px;\n          bottom: -8px;\n          border-radius: 50%;\n          border: 2px solid var(--va-primary);\n          opacity: 0;\n          animation: pulse-ring-outer 2s ease-out infinite 0.5s;\n        }\n\n        @keyframes pulse-glow {\n          0%, 100% { box-shadow: 0 4px 20px rgba(79, 186, 241, 0.4); transform: scale(1); }\n          50% { box-shadow: 0 4px 30px rgba(79, 186, 241, 0.7); transform: scale(1.02); }\n        }\n\n        @keyframes pulse-ring {\n          0% { transform: scale(1); opacity: 0.6; }\n          100% { transform: scale(1.4); opacity: 0; }\n        }\n\n        @keyframes pulse-ring-outer {\n          0% { transform: scale(1); opacity: 0.4; }\n          100% { transform: scale(1.6); opacity: 0; }\n        }\n\n        .va-trigger:hover {\n          transform: scale(1.1);\n          box-shadow: 0 6px 30px rgba(79, 186, 241, 0.6);\n          animation: none;\n        }\n\n        .va-trigger:hover::before,\n        .va-trigger:hover::after {\n          animation: none;\n          opacity: 0;\n        }\n        .va-trigger img { width: 40px; height: 40px; object-fit: contain; border-radius: 8px; }\n        .va-trigger.listening { animation: pulse 1.5s infinite; }\n        @keyframes pulse {\n          0%, 100% { box-shadow: 0 0 0 0 rgba(79, 186, 241, 0.7); }\n          50% { box-shadow: 0 0 0 15px rgba(79, 186, 241, 0); }\n        }\n        .va-panel {\n          display: none;\n          position: absolute;\n          bottom: 70px;\n          right: 0;\n          width: 360px;\n          max-height: 500px;\n          background: var(--va-dark);\n          border: 1px solid rgba(255,255,255,0.1);\n          border-radius: 16px;\n          overflow: hidden;\n          box-shadow: 0 10px 40px rgba(0,0,0,0.5);\n        }\n        .va-panel.open {\n          display: flex;\n          flex-direction: column;\n          animation: slideUp 0.3s ease;\n        }\n        @keyframes slideUp {\n          from { opacity: 0; transform: translateY(20px); }\n          to { opacity: 1; transform: translateY(0); }\n        }\n        .va-header {\n          padding: 16px;\n          background: linear-gradient(135deg, var(--va-primary) 0%, var(--va-primary-dark) 50%, var(--va-accent) 100%);\n          display: flex;\n          align-items: center;\n          gap: 12px;\n        }\n        .va-header-icon {\n          width: 40px;\n          height: 40px;\n          background: rgba(255,255,255,0.2);\n          border-radius: 50%;\n          display: flex;\n          align-items: center;\n          justify-content: center;\n        }\n        .va-header-icon svg { width: 24px; height: 24px; fill: white; }\n        .va-header-text h3 { margin: 0; font-size: 16px; font-weight: 600; color: white; }\n        .va-header-text p { margin: 2px 0 0; font-size: 12px; color: rgba(255,255,255,0.8); }\n        .va-close {\n          margin-left: auto;\n          background: none;\n          border: none;\n          color: white;\n          cursor: pointer;\n          padding: 4px;\n          opacity: 0.8;\n        }\n        .va-close:hover { opacity: 1; }\n        .va-messages { flex: 1; overflow-y: auto; padding: 16px; max-height: 300px; }\n        .va-message { margin-bottom: 12px; display: flex; gap: 8px; }\n        .va-message.user { flex-direction: row-reverse; }\n        .va-message-content {\n          max-width: 80%;\n          padding: 10px 14px;\n          border-radius: 12px;\n          font-size: 14px;\n          line-height: 1.4;\n        }\n        .va-message.assistant .va-message-content { background: rgba(255,255,255,0.1); color: #e5e5e5; }\n        .va-message.user .va-message-content { background: var(--va-primary); color: white; }\n        .va-input-area { padding: 12px 16px; border-top: 1px solid rgba(255,255,255,0.1); display: flex; gap: 8px; }\n        .va-input {\n          flex: 1;\n          background: rgba(255,255,255,0.1);\n          border: 1px solid rgba(255,255,255,0.1);\n          border-radius: 24px;\n          padding: 10px 16px;\n          color: white;\n          font-size: 14px;\n          outline: none;\n        }\n        .va-input::placeholder { color: rgba(255,255,255,0.5); }\n        .va-input:focus { border-color: var(--va-primary); }\n        .va-mic-btn {\n          width: 40px;\n          height: 40px;\n          border-radius: 50%;\n          background: ${m?"var(--va-primary)":"rgba(255,255,255,0.1)"};\n          border: none;\n          cursor: ${m?"pointer":"not-allowed"};\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          transition: all 0.2s;\n        }\n        .va-mic-btn.listening { background: #ef4444; animation: pulse 1s infinite; }\n        .va-mic-btn svg { width: 20px; height: 20px; fill: white; }\n        .va-send-btn {\n          width: 40px;\n          height: 40px;\n          border-radius: 50%;\n          background: var(--va-primary);\n          border: none;\n          cursor: pointer;\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          transition: all 0.2s;\n        }\n        .va-send-btn:hover { transform: scale(1.1); }\n        .va-send-btn svg { width: 20px; height: 20px; fill: white; }\n        .va-typing { display: flex; gap: 4px; padding: 10px 14px; }\n        .va-typing span {\n          width: 8px;\n          height: 8px;\n          background: rgba(255,255,255,0.5);\n          border-radius: 50%;\n          animation: typing 1.4s infinite ease-in-out;\n        }\n        .va-typing span:nth-child(2) { animation-delay: 0.2s; }\n        .va-typing span:nth-child(3) { animation-delay: 0.4s; }\n        @keyframes typing {\n          0%, 60%, 100% { transform: translateY(0); }\n          30% { transform: translateY(-6px); }\n        }\n        .va-cta { padding: 12px 16px; background: rgba(79, 186, 241, 0.1); border-top: 1px solid rgba(79, 186, 241, 0.2); }\n        .va-cta a {\n          display: block;\n          text-align: center;\n          padding: 10px;\n          background: var(--va-primary);\n          color: white;\n          text-decoration: none;\n          border-radius: 8px;\n          font-size: 14px;\n          font-weight: 500;\n          transition: all 0.2s;\n        }\n        .va-cta a:hover { background: var(--va-primary-dark); }\n        @keyframes fadeIn {\n          from { opacity: 0; transform: translateY(10px); }\n          to { opacity: 1; transform: translateY(0); }\n        }\n        @keyframes fadeOut {\n          from { opacity: 1; transform: translateY(0); }\n          to { opacity: 0; transform: translateY(10px); }\n        }\n        @keyframes notifSlideIn {\n          from { opacity: 0; transform: translateX(20px) scale(0.9); }\n          to { opacity: 1; transform: translateX(0) scale(1); }\n        }\n        @keyframes notifSlideOut {\n          from { opacity: 1; transform: translateX(0) scale(1); }\n          to { opacity: 0; transform: translateX(20px) scale(0.9); }\n        }\n        @media (max-width: 480px) { .va-panel { width: calc(100vw - 40px); right: -10px; } }\n      </style>\n\n      <button class="va-trigger" id="va-trigger" aria-label="Open voice assistant">\n        <img src="/logo.png" alt="3A" style="width:40px;height:40px;object-fit:contain;border-radius:8px;" />\n      </button>\n\n      <div class="va-panel" id="va-panel">\n        <div class="va-header">\n          <div class="va-header-icon">\n            <img src="/logo.png" alt="3A" style="width:24px;height:24px;object-fit:contain;border-radius:4px;" />\n          </div>\n          <div class="va-header-text">\n            <h3>3A Assistant</h3>\n            <p>${y?"Type your question":"Speak or type"}</p>\n          </div>\n          <button class="va-close" id="va-close" aria-label="Close">\n            <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>\n          </button>\n        </div>\n\n        <div class="va-messages" id="va-messages"></div>\n\n        <div class="va-input-area">\n          <input type="text" class="va-input" id="va-input" placeholder="${t}">\n          ${!y&&m?'\n          <button class="va-mic-btn" id="va-mic" aria-label="Enable microphone">\n            <svg viewBox="0 0 24 24"><path d="M12 14c1.66 0 3-1.34 3-3V5c0-1.66-1.34-3-3-3S9 3.34 9 5v6c0 1.66 1.34 3 3 3zm-1 1.93c-3.94-.49-7-3.85-7-7.93h2c0 3.31 2.69 6 6 6s6-2.69 6-6h2c0 4.08-3.06 7.44-7 7.93V20h4v2H8v-2h4v-4.07z"/></svg>\n          </button>\n          ':""}\n          <button class="va-send-btn" id="va-send" aria-label="Send">\n            <svg viewBox="0 0 24 24"><path d="M2.01 21L23 12 2.01 3 2 10l15 2-15 2z"/></svg>\n          </button>\n        </div>\n\n        <div class="va-cta">\n          <a href="/en/contact.html">Request a free audit</a>\n        </div>\n      </div>\n    `,document.body.appendChild(e),document.getElementById("va-trigger").addEventListener("click",q),document.getElementById("va-close").addEventListener("click",q),document.getElementById("va-send").addEventListener("click",(()=>{k(document.getElementById("va-input").value)})),document.getElementById("va-input").addEventListener("keypress",(e=>{"Enter"===e.key&&k(e.target.value)})),m&&(function(){if(!m)return;const e=window.SpeechRecognition||window.webkitSpeechRecognition;d=new e,d.lang="en-US",d.continuous=!1,d.interimResults=!1,d.onresult=e=>{const n=e.results[0][0].transcript;document.getElementById("va-input").value=n,k(n)},d.onend=()=>{l=!1,document.getElementById("va-mic")?.classList.remove("listening"),document.getElementById("va-trigger").classList.remove("listening")},d.onerror=()=>{l=!1,document.getElementById("va-mic")?.classList.remove("listening")}}(),document.getElementById("va-mic").addEventListener("click",x)),setTimeout((()=>{c||function(){const e=document.getElementById("va-trigger"),n=document.createElement("div");n.className="va-notification",n.innerHTML='\n      <div class="va-notif-icon">\n        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">\n          <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/>\n        </svg>\n      </div>\n      <div class="va-notif-text">\n        <span class="va-notif-title">Need help?</span>\n        <span class="va-notif-sub">I\'m here for you</span>\n      </div>\n    ',n.style.cssText="\n      position: absolute; bottom: 75px; right: 0;\n      display: flex; align-items: center; gap: 10px;\n      background: rgba(25, 30, 53, 0.95);\n      backdrop-filter: blur(12px); -webkit-backdrop-filter: blur(12px);\n      border: 1px solid rgba(79, 186, 241, 0.3);\n      padding: 12px 16px; border-radius: 12px;\n      box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3), 0 0 20px rgba(79, 186, 241, 0.15);\n      animation: notifSlideIn 0.4s cubic-bezier(0.16, 1, 0.3, 1);\n      cursor: pointer; white-space: nowrap; z-index: 9999;\n    ";const t=n.querySelector(".va-notif-icon");t&&(t.style.cssText="width: 32px; height: 32px; background: linear-gradient(135deg, rgba(79, 186, 241, 0.2) 0%, rgba(16, 185, 129, 0.1) 100%); border-radius: 8px; display: flex; align-items: center; justify-content: center; color: #4FBAF1; flex-shrink: 0;");const a=n.querySelector(".va-notif-text");a&&(a.style.cssText="display: flex; flex-direction: column; gap: 2px;");const o=n.querySelector(".va-notif-title");o&&(o.style.cssText="font-size: 14px; font-weight: 600; color: #E4F4FC; letter-spacing: -0.01em;");const i=n.querySelector(".va-notif-sub");i&&(i.style.cssText="font-size: 11px; color: rgba(255, 255, 255, 0.7); font-weight: 400;");const s=document.createElement("div");s.style.cssText="position: absolute; bottom: -6px; right: 24px; width: 12px; height: 12px; background: rgba(25, 30, 53, 0.95); border-right: 1px solid rgba(79, 186, 241, 0.3); border-bottom: 1px solid rgba(79, 186, 241, 0.3); transform: rotate(45deg);",n.appendChild(s),e.parentNode.appendChild(n),n.addEventListener("mouseenter",(()=>{n.style.borderColor="rgba(79, 186, 241, 0.6)",n.style.boxShadow="0 8px 32px rgba(0, 0, 0, 0.4), 0 0 30px rgba(79, 186, 241, 0.25)"})),n.addEventListener("mouseleave",(()=>{n.style.borderColor="rgba(79, 186, 241, 0.3)",n.style.boxShadow="0 8px 32px rgba(0, 0, 0, 0.3), 0 0 20px rgba(79, 186, 241, 0.15)"})),n.addEventListener("click",q),setTimeout((()=>{n.style.animation="notifSlideOut 0.3s ease forwards",setTimeout((()=>n.remove()),300)}),6e3)}()}),2e3)}function b(e,n="assistant"){const t=document.getElementById("va-messages"),a=document.createElement("div");a.className=`va-message ${n}`,a.innerHTML=`<div class="va-message-content">${e}</div>`,t.appendChild(a),t.scrollTop=t.scrollHeight,"assistant"===n&&g&&function(e){if(!g)return;u.cancel();const n=new SpeechSynthesisUtterance(e);n.lang="en-US",n.rate=1,u.speak(n)}(e),p.push({role:"user"===n?"user":"assistant",content:e})}function w(){const e=document.getElementById("va-typing");e&&e.remove()}function x(){d&&(l?d.stop():(d.start(),l=!0,document.getElementById("va-mic").classList.add("listening"),document.getElementById("va-trigger").classList.add("listening")))}async function k(e){if(e.trim()){b(e,"user"),document.getElementById("va-input").value="",function(){const e=document.getElementById("va-messages"),n=document.createElement("div");n.className="va-message assistant",n.id="va-typing",n.innerHTML='<div class="va-message-content"><div class="va-typing"><span></span><span></span><span></span></div></div>',e.appendChild(n),e.scrollTop=e.scrollHeight}();try{const n=await async function(e){const n=e.toLowerCase();if(S.bookingFlow.active){const n=await async function(e){const n=e.toLowerCase(),t=S.bookingFlow;if(n.includes("cancel")||n.includes("no")||n.includes("stop"))return r("voice_booking_cancelled",{step:t.step}),t.active=!1,t.step=null,t.data={name:null,email:null,datetime:null,service:"Consultation"},"No problem, booking cancelled. How can I help you?";if("name"===t.step){const n=e.trim();return n.length<2?"I didn't catch your name. Could you repeat it?":(t.data.name=n,t.step="email","Thanks "+n+"! What's your email address for the confirmation?")}if("email"===t.step){const n=e.trim().toLowerCase();if(!function(e){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)}(n))return"This email doesn't seem valid. Can you check it? (format: example@email.com)";t.data.email=n,t.step="datetime";const a=await async function(){const e=Date.now();if(I.slots.length>0&&e-I.timestamp<L)return I.slots;try{const n=await fetch(E+"?action=availability",{method:"GET",mode:"cors"}),t=await n.json();if(t.success&&t.data&&t.data.slots){const n=t.data.slots.slice(0,6).map((e=>{const n=new Date(e.start);return{date:n.toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric"}),time:n.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit"}),iso:e.start}}));return I={slots:n,timestamp:e},n}}catch(e){console.error("Error fetching slots:",e)}return A()}(),o=a.slice(0,3);return 0===o.length?"Sorry, no slots available this week. Please email contact@3a-automation.com to schedule a meeting.":"Perfect! Here are the next available slots:\n\n"+o.map(((e,n)=>n+1+". "+e.date+" at "+e.time)).join("\n")+"\n\nReply with the number (1, 2, or 3)."}if("datetime"===t.step){const e=function(){if(I.slots.length>0)return I.slots.slice(0,3);return A()}();let a=null;return n.includes("1")||n.includes("first")?a=e[0]:n.includes("2")||n.includes("second")?a=e[1]:(n.includes("3")||n.includes("third"))&&(a=e[2]),a?(t.data.datetime=a.iso,t.step="confirm",r("voice_booking_slot_selected",{slot_date:a.date,slot_time:a.time}),"Great! Here's the summary:\n\nName: "+t.data.name+"\nEmail: "+t.data.email+"\nDate: "+a.date+" at "+a.time+"\n\nConfirm this appointment? (yes/no)"):"I didn't understand. Reply 1, 2, or 3 to choose a slot."}if("confirm"===t.step)return n.includes("yes")||n.includes("ok")||n.includes("confirm")?(t.step="submitting",null):"Say 'yes' to confirm or 'cancel' to start over.";return null}(e);if("submitting"===S.bookingFlow.step)return await async function(){const e=S.bookingFlow,n=function(){if(window.GeoLocale&&"function"==typeof window.GeoLocale.getTimezone)return window.GeoLocale.getTimezone();try{return{iana:Intl.DateTimeFormat().resolvedOptions().timeZone,offset:(new Date).getTimezoneOffset()}}catch(e){return{iana:null,offset:(new Date).getTimezoneOffset()}}}(),t=await async function(e){try{const n=await fetch(E,{method:"POST",mode:"cors",headers:{"Content-Type":"text/plain"},body:JSON.stringify(e)});return await n.json()}catch(e){return console.error("Booking error:",e),{success:!1,message:e.message}}}({name:e.data.name,email:e.data.email,datetime:e.data.datetime,service:e.data.service,phone:"",notes:"Booking via voice assistant",timezone:n.iana||`UTC${n.offset>0?"-":"+"}${Math.abs(n.offset/60)}`});return e.active=!1,e.step=null,t.success?(r("voice_booking_completed",{service:e.data.service,datetime:e.data.datetime}),"Your appointment is confirmed! You'll receive a confirmation email at "+e.data.email+".\n\nSee you soon!"):(r("voice_booking_failed",{error:t.message}),"Sorry, there was an issue: "+t.message+"\n\nYou can book directly at /en/booking.html")}();if(n)return n}if(function(e){const n=e.toLowerCase();return T.some((e=>n.includes(e)))}(n))return S.bookingFlow.active=!0,S.bookingFlow.step="name",r("voice_booking_started",{step:"name"}),"Great! I'll help you book an appointment.\n\nFirst, what's your name?";const t=function(e){const n=e.toLowerCase(),t={construction:["construction","building","contractor","renovation","real estate"],ecommerce:["e-commerce","ecommerce","online store","shopify","woocommerce","online shop"],b2b:["b2b","business","professional","corporate","enterprise","saas"],saas:["saas","software","app","startup","tech"],services:["service","agency","consultant","freelance","professional services"],retail:["retail","store","shop","brick and mortar"]};for(const[e,a]of Object.entries(t))if(a.some((e=>n.includes(e))))return e;return null}(e);t&&(S.industry=t);const a=function(e){const n=e.toLowerCase(),t={leads:["lead","prospect","customer","acquisition","find customers"],email:["email","newsletter","klaviyo","emailing","marketing"],analytics:["analytics","data","dashboard","report","ga4"],automation:["automate","automation","workflow","save time"],quote:["quote","price","cost","budget","pricing"]};for(const[e,a]of Object.entries(t))if(a.some((e=>n.includes(e))))return e;return null}(e);a&&(S.need=a);if(B.yes.keywords.some((e=>n.includes(e))))return"process"===S.lastTopic?"Perfect! To get started:\n• Go to /en/contact.html\n\nFill out the form (5 min) and we'll send the report in 24-48h.\n\nAny questions before starting?":"audit"===S.lastTopic?"Great! For your free audit:\n• Go to /en/contact.html\n\nWe'll send the report with 3 recommendations in 24-48h.\n\nOr email us directly at contact@3a-automation.com with your website link!":"Excellent! Next step is the free audit.\n\n• Fill out the form at /en/contact.html\n• Or email: contact@3a-automation.com\n\nWe'll respond within 24h!";for(const[e,t]of Object.entries(B))if(t.keywords.some((e=>n.includes(e)))){if(S.lastTopic=e,"leads"===e&&S.industry){const e=F[S.industry];if(e&&e.leads)return e.leads+"\n\nWould you like to know more about pricing?"}if(t.response)return t.response}if(S.industry){const e=F[S.industry];if(e){if(n.includes("service")||n.includes("automation")||n.includes("what"))return S.lastTopic="services",e.services+"\n\nWhat interests you most?";if(!p.some((n=>n.content.includes(e.intro.substring(0,30)))))return e.intro+"\n\nWhat's your main need?"}}if("quote"===S.need)return S.lastTopic="pricing",B.pricing.response;if(S.industry)return`For your ${S.industry.toUpperCase()} business, we can offer several solutions.\n\nLet's start with the free audit: we'll send you a personalized report with 3 priority recommendations in 24-48h.\n\nInterested?`;return"To help you better, could you tell me:\n\n• What industry are you in?\n• What's your main need? (leads, email, analytics...)\n\nOr just request the free audit directly and we'll get back to you with personalized recommendations!"}(e);w(),b(n,"assistant")}catch(e){w(),b("Sorry, an error occurred. Please try again or use the contact form.","assistant")}}}let S={industry:null,need:null,stage:"discovery",lastTopic:null,bookingFlow:{active:!1,step:null,data:{name:null,email:null,datetime:null,service:"Consultation"}}};const E="https://script.google.com/macros/s/AKfycbw9JP0YCJV47HL5zahXHweJgjEfNsyiFYFKZXGFUTS9c3SKrmRZdJEg0tcWnvA-P2Jl/exec",T=["appointment","book","booking","schedule","call","meeting","talk","discuss"];let I={slots:[],timestamp:0};const L=3e5;function A(){const e=new Date,n=[];for(let t=1;t<=7;t++){const a=new Date(e);a.setDate(e.getDate()+t);const o=a.getDay();if(o>=1&&o<=5&&(a.setHours(10,0,0,0),n.push({date:a.toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric"}),time:"10:00 AM",iso:a.toISOString()}),n.length>=3))break}return n}const F={construction:{intro:"For construction, we offer specific solutions: lead capture via Google Maps, automated quote follow-ups, and post-project review requests.",services:"Our construction automations include:\n• Google Maps scraping for new projects\n• Automated bid monitoring\n• Scheduled quote follow-ups\n• Post-project satisfaction emails\n• Automatic Google review requests",leads:"For construction leads, we use Google Maps scraping to identify ongoing projects and companies hiring. We can also monitor public bids automatically."},b2b:{intro:"For B2B, we focus on automatic lead qualification, lead scoring, and nurturing sequences to convert cold prospects into customers.",services:"Our B2B automations include:\n• Automatic lead scoring\n• Nurturing sequences (5-10 emails)\n• CRM sync (HubSpot, Pipedrive)\n• Real-time sales alerts\n• Automatic lead qualification",leads:"For B2B lead generation, we configure capture workflows from LinkedIn, web forms, and automatically qualify based on your criteria. Hot leads trigger instant alerts."},ecommerce:{intro:"For e-commerce, we're Klaviyo and Shopify experts. Our automated flows recover 5-15% of abandoned carts and generate an average of $42 for every $1 invested.",services:"Our e-commerce automations include:\n• Abandoned cart recovery (3 emails)\n• Welcome series for new customers\n• Post-purchase flows for retention\n• Automatic back-in-stock alerts\n• RFM segmentation\n• Winback for dormant customers",leads:'For e-commerce, "leads" are your visitors. We set up complete tracking, smart popups, and conversion flows to turn visitors into buyers.'},saas:{intro:"For SaaS, we configure automated onboarding, churn prevention, and feature adoption emails to maximize retention.",services:"Our SaaS automations include:\n• Sequenced onboarding\n• Churn prevention (at-risk users)\n• Feature adoption emails\n• Automatic NPS surveys\n• Smart upsell triggers"},services:{intro:"For service providers, we configure prospecting automation, appointment reminders, and post-mission testimonial requests.",services:"Our services automations include:\n• Automated prospecting\n• Long-cycle lead nurturing\n• Appointment reminders\n• Testimonial requests\n• Automatic invoicing"}},B={process:{keywords:["process","how does it work","steps","explain","how do you"],response:"Here's how it works:\n\n1. **Diagnostic form** (5 min)\nDescribe your business and goals\n\n2. **Personalized Report** (24-48h)\nWe send you 3 priority recommendations\n\n3. **Custom Proposal**\nIf interested, we send a detailed quote tailored to your needs\n\n4. **Turnkey Implementation**\nWe configure everything - no technical skills needed\n\nNo mandatory calls - all written if you prefer!"},pricing:{keywords:["price","cost","budget","quote","how much","pricing"],response:"Our pricing is fixed and transparent:\n\n**ONE-TIME PACKS:**\nFrom simple projects to complete deployments\n\n**MONTHLY RETAINERS:**\nOngoing maintenance and optimization\n\nThe audit is FREE and helps you choose the right package.\n\nSee our pricing at /en/pricing.html or request a custom quote!"},audit:{keywords:["audit","free","diagnostic","analysis"],response:"The audit is 100% free!\n\n**What you get:**\n• Analysis of your current processes\n• Automation opportunities identified\n• Estimated ROI potential\n• Personalized recommendations\n\n**Timeframe:** 24-48h after the form\n\nWould you like me to send you the form link?"},automations:{keywords:["automation","automations","workflow","flows","what can you"],response:"We offer a comprehensive automation catalog:\n\n**Email Marketing:**\nWelcome, Abandoned cart, Post-purchase, Winback\n\n**Lead Generation:**\nCapture, Scoring, Qualification, Nurturing\n\n**Analytics:**\nDashboards, Alerts, Automated reports\n\n**E-commerce:**\nProduct sync, Stock alerts, Reviews\n\n**AI & Video:**\nMarketing videos, AI Avatar, Voice AI\n\nWhich type interests you most?"},leads:{keywords:["lead","prospect","customer","acquisition","find customers"],response:null},difference:{keywords:["difference","why you","agency","advantage","unique"],response:"What makes us different:\n\n• **Specialized agency**\nYou work directly with experts, not salespeople\n\n• **Fair pricing**\nTransparent, competitive rates\n\n• **Specialization**\nMarketing automation experts - not generalists\n\n• **Measurable results**\nProven ROI on every project\n\n• **Flexibility**\nNo long-term commitment required"},guarantee:{keywords:["guarantee","risk","not work","satisfied"],response:"Our guarantee is simple:\n\n• **Satisfied or we iterate**\nIf automations don't work as expected, we fix until you're satisfied.\n\n• **Complete documentation**\nYou keep control, even without us.\n\n• **No commitment**\nPacks are one-time. Retainers cancelable anytime.\n\nWant to start with the free audit?"},timeline:{keywords:["timeline","when","how long","duration","time"],response:"Timelines vary by project:\n\n• **Simple project:** 48-72h\n• **Standard project:** 5-7 days\n• **Complete project:** 10-14 days\n• **Free audit:** 24-48h\n\nThese include revisions. Rush available if needed."},yes:{keywords:["yes","sure","ok","let's go","interested","i want"],response:null},no:{keywords:["no","not now","later","thinking"],response:"No problem! Take your time.\n\nThe free audit is always available. You can also email us at contact@3a-automation.com.\n\nFeel free to come back if you have questions!"},greetings:{keywords:["hello","hi","hey","good morning","good afternoon"],response:"Hello! I'm the 3A Automation assistant.\n\nI can help you:\n• Automate your marketing (emails, leads)\n• Understand our services\n• Get a free audit\n\nWhat industry are you in?"},thanks:{keywords:["thanks","thank you","great","perfect","awesome"],response:"You're welcome!\n\nIf you're ready to take action, we recommend the free audit — it's the best way to see what we can do for you.\n\nMore questions? We're here!"}};function q(){c=!c;const t=document.getElementById("va-panel");if(c){if(t.classList.add("open"),0===p.length){b(y?n:e,"assistant")}document.getElementById("va-input").focus()}else t.classList.remove("open"),u&&u.cancel()}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",h):h()}();