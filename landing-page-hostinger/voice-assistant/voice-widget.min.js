!function(){"use strict";const e="Bonjour ! Je suis l'assistant 3A Automation. Comment puis-je vous aider ?",n="Bonjour ! Je suis l'assistant 3A Automation. Posez votre question par √©crit, je vous r√©ponds instantan√©ment.",t="Posez votre question...",a="#4FBAF1",i="#2B6685",s="#10B981",o="#191E35";let r=null;function l(e,n={}){"function"==typeof gtag&&gtag("event",e,{event_category:"voice_assistant",...n}),"undefined"!=typeof dataLayer&&Array.isArray(dataLayer)&&dataLayer.push({event:e,event_category:"voice_assistant",...n})}!async function(){try{const e=await fetch("/voice-assistant/knowledge.json");e.ok&&(r=await e.json(),console.log("Knowledge base loaded:",r.totalAutomations,"automations"))}catch(e){console.log("Knowledge base not available, using defaults")}}();let c=!1,u=!1,d=null,p=window.speechSynthesis,m=[];const v="SpeechRecognition"in window||"webkitSpeechRecognition"in window,g="speechSynthesis"in window,f=navigator.userAgent.toLowerCase().includes("firefox"),b=/^((?!chrome|android).)*safari/i.test(navigator.userAgent),h=!v||f||b;function x(){const e=document.createElement("div");e.id="voice-assistant-widget",e.innerHTML=`\n      <style>\n        #voice-assistant-widget {\n          --va-primary: ${a};\n          --va-primary-dark: ${i};\n          --va-accent: ${s};\n          --va-dark: ${o};\n          font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;\n          position: fixed;\n          bottom: 20px;\n          right: 20px;\n          z-index: 99999;\n        }\n\n        .va-trigger {\n          width: 60px;\n          height: 60px;\n          border-radius: 50%;\n          background: linear-gradient(135deg, var(--va-primary) 0%, var(--va-primary-dark) 50%, var(--va-accent) 100%);\n          border: none;\n          cursor: pointer;\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          box-shadow: 0 4px 20px rgba(79, 186, 241, 0.4);\n          transition: all 0.3s ease;\n          position: relative;\n          animation: pulse-glow 2s ease-in-out infinite;\n        }\n\n        .va-trigger::before {\n          content: '';\n          position: absolute;\n          top: -4px;\n          left: -4px;\n          right: -4px;\n          bottom: -4px;\n          border-radius: 50%;\n          background: linear-gradient(135deg, var(--va-primary), var(--va-accent));\n          opacity: 0;\n          z-index: -1;\n          animation: pulse-ring 2s ease-out infinite;\n        }\n\n        .va-trigger::after {\n          content: '';\n          position: absolute;\n          top: -8px;\n          left: -8px;\n          right: -8px;\n          bottom: -8px;\n          border-radius: 50%;\n          border: 2px solid var(--va-primary);\n          opacity: 0;\n          animation: pulse-ring-outer 2s ease-out infinite 0.5s;\n        }\n\n        @keyframes pulse-glow {\n          0%, 100% { box-shadow: 0 4px 20px rgba(79, 186, 241, 0.4); transform: scale(1); }\n          50% { box-shadow: 0 4px 30px rgba(79, 186, 241, 0.7); transform: scale(1.02); }\n        }\n\n        @keyframes pulse-ring {\n          0% { transform: scale(1); opacity: 0.6; }\n          100% { transform: scale(1.4); opacity: 0; }\n        }\n\n        @keyframes pulse-ring-outer {\n          0% { transform: scale(1); opacity: 0.4; }\n          100% { transform: scale(1.6); opacity: 0; }\n        }\n\n        .va-trigger:hover {\n          transform: scale(1.1);\n          box-shadow: 0 6px 30px rgba(79, 186, 241, 0.6);\n          animation: none;\n        }\n\n        .va-trigger:hover::before,\n        .va-trigger:hover::after {\n          animation: none;\n          opacity: 0;\n        }\n\n        .va-trigger img {\n          width: 40px;\n          height: 40px;\n          object-fit: contain;\n          border-radius: 8px;\n        }\n\n        .va-trigger.listening {\n          animation: pulse 1.5s infinite;\n        }\n\n        @keyframes pulse {\n          0%, 100% { box-shadow: 0 0 0 0 rgba(79, 186, 241, 0.7); }\n          50% { box-shadow: 0 0 0 15px rgba(79, 186, 241, 0); }\n        }\n\n        .va-panel {\n          display: none;\n          position: absolute;\n          bottom: 70px;\n          right: 0;\n          width: 360px;\n          max-height: 500px;\n          background: var(--va-dark);\n          border: 1px solid rgba(255,255,255,0.1);\n          border-radius: 16px;\n          overflow: hidden;\n          box-shadow: 0 10px 40px rgba(0,0,0,0.5);\n        }\n\n        .va-panel.open {\n          display: flex;\n          flex-direction: column;\n          animation: slideUp 0.3s ease;\n        }\n\n        @keyframes slideUp {\n          from { opacity: 0; transform: translateY(20px); }\n          to { opacity: 1; transform: translateY(0); }\n        }\n\n        .va-header {\n          padding: 16px;\n          background: linear-gradient(135deg, var(--va-primary) 0%, var(--va-primary-dark) 50%, var(--va-accent) 100%);\n          display: flex;\n          align-items: center;\n          gap: 12px;\n        }\n\n        .va-header-icon {\n          width: 40px;\n          height: 40px;\n          background: rgba(255,255,255,0.2);\n          border-radius: 50%;\n          display: flex;\n          align-items: center;\n          justify-content: center;\n        }\n\n        .va-header-icon svg {\n          width: 24px;\n          height: 24px;\n          fill: white;\n        }\n\n        .va-header-text h3 {\n          margin: 0;\n          font-size: 16px;\n          font-weight: 600;\n          color: white;\n        }\n\n        .va-header-text p {\n          margin: 2px 0 0;\n          font-size: 12px;\n          color: rgba(255,255,255,0.8);\n        }\n\n        .va-close {\n          margin-left: auto;\n          background: none;\n          border: none;\n          color: white;\n          cursor: pointer;\n          padding: 4px;\n          opacity: 0.8;\n        }\n\n        .va-close:hover {\n          opacity: 1;\n        }\n\n        .va-messages {\n          flex: 1;\n          overflow-y: auto;\n          padding: 16px;\n          max-height: 300px;\n        }\n\n        .va-message {\n          margin-bottom: 12px;\n          display: flex;\n          gap: 8px;\n        }\n\n        .va-message.user {\n          flex-direction: row-reverse;\n        }\n\n        .va-message-content {\n          max-width: 80%;\n          padding: 10px 14px;\n          border-radius: 12px;\n          font-size: 14px;\n          line-height: 1.4;\n        }\n\n        .va-message.assistant .va-message-content {\n          background: rgba(255,255,255,0.1);\n          color: #e5e5e5;\n        }\n\n        .va-message.user .va-message-content {\n          background: var(--va-primary);\n          color: white;\n        }\n\n        .va-input-area {\n          padding: 12px 16px;\n          border-top: 1px solid rgba(255,255,255,0.1);\n          display: flex;\n          gap: 8px;\n        }\n\n        .va-input {\n          flex: 1;\n          background: rgba(255,255,255,0.1);\n          border: 1px solid rgba(255,255,255,0.1);\n          border-radius: 24px;\n          padding: 10px 16px;\n          color: white;\n          font-size: 14px;\n          outline: none;\n        }\n\n        .va-input::placeholder {\n          color: rgba(255,255,255,0.5);\n        }\n\n        .va-input:focus {\n          border-color: var(--va-primary);\n        }\n\n        .va-mic-btn {\n          width: 40px;\n          height: 40px;\n          border-radius: 50%;\n          background: ${v?"var(--va-primary)":"rgba(255,255,255,0.1)"};\n          border: none;\n          cursor: ${v?"pointer":"not-allowed"};\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          transition: all 0.2s;\n        }\n\n        .va-mic-btn:hover {\n          ${v?"transform: scale(1.1);":""}\n        }\n\n        .va-mic-btn.listening {\n          background: #ef4444;\n          animation: pulse 1s infinite;\n        }\n\n        .va-mic-btn svg {\n          width: 20px;\n          height: 20px;\n          fill: white;\n        }\n\n        .va-send-btn {\n          width: 40px;\n          height: 40px;\n          border-radius: 50%;\n          background: var(--va-primary);\n          border: none;\n          cursor: pointer;\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          transition: all 0.2s;\n        }\n\n        .va-send-btn:hover {\n          transform: scale(1.1);\n        }\n\n        .va-send-btn svg {\n          width: 20px;\n          height: 20px;\n          fill: white;\n        }\n\n        .va-typing {\n          display: flex;\n          gap: 4px;\n          padding: 10px 14px;\n        }\n\n        .va-typing span {\n          width: 8px;\n          height: 8px;\n          background: rgba(255,255,255,0.5);\n          border-radius: 50%;\n          animation: typing 1.4s infinite ease-in-out;\n        }\n\n        .va-typing span:nth-child(2) { animation-delay: 0.2s; }\n        .va-typing span:nth-child(3) { animation-delay: 0.4s; }\n\n        @keyframes typing {\n          0%, 60%, 100% { transform: translateY(0); }\n          30% { transform: translateY(-6px); }\n        }\n\n        .va-cta {\n          padding: 12px 16px;\n          background: rgba(79, 186, 241, 0.1);\n          border-top: 1px solid rgba(79, 186, 241, 0.2);\n        }\n\n        .va-cta a {\n          display: block;\n          text-align: center;\n          padding: 10px;\n          background: var(--va-primary);\n          color: white;\n          text-decoration: none;\n          border-radius: 8px;\n          font-size: 14px;\n          font-weight: 500;\n          transition: all 0.2s;\n        }\n\n        .va-cta a:hover {\n          background: var(--va-primary-dark);\n        }\n\n        @keyframes fadeIn {\n          from { opacity: 0; transform: translateY(10px); }\n          to { opacity: 1; transform: translateY(0); }\n        }\n\n        @keyframes fadeOut {\n          from { opacity: 1; transform: translateY(0); }\n          to { opacity: 0; transform: translateY(10px); }\n        }\n\n        @keyframes notifSlideIn {\n          from {\n            opacity: 0;\n            transform: translateX(20px) scale(0.9);\n          }\n          to {\n            opacity: 1;\n            transform: translateX(0) scale(1);\n          }\n        }\n\n        @keyframes notifSlideOut {\n          from {\n            opacity: 1;\n            transform: translateX(0) scale(1);\n          }\n          to {\n            opacity: 0;\n            transform: translateX(20px) scale(0.9);\n          }\n        }\n\n        @media (max-width: 480px) {\n          .va-panel {\n            width: calc(100vw - 40px);\n            right: -10px;\n          }\n        }\n      </style>\n\n      <button class="va-trigger" id="va-trigger" aria-label="Ouvrir l'assistant vocal">\n        <img src="/logo.png" alt="3A" />\n      </button>\n\n      <div class="va-panel" id="va-panel">\n        <div class="va-header">\n          <div class="va-header-icon">\n            <img src="/logo.png" alt="3A" style="width:24px;height:24px;object-fit:contain;border-radius:4px;" />\n          </div>\n          <div class="va-header-text">\n            <h3>Assistant 3A</h3>\n            <p>${h?"√âcrivez votre question":"Parlez ou √©crivez"}</p>\n          </div>\n          <button class="va-close" id="va-close" aria-label="Fermer">\n            <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>\n          </button>\n        </div>\n\n        <div class="va-messages" id="va-messages"></div>\n\n        <div class="va-input-area">\n          <input type="text" class="va-input" id="va-input" placeholder="${t}">\n          ${!h&&v?'\n          <button class="va-mic-btn" id="va-mic" aria-label="Activer le micro">\n            <svg viewBox="0 0 24 24"><path d="M12 14c1.66 0 3-1.34 3-3V5c0-1.66-1.34-3-3-3S9 3.34 9 5v6c0 1.66 1.34 3 3 3zm-1 1.93c-3.94-.49-7-3.85-7-7.93h2c0 3.31 2.69 6 6 6s6-2.69 6-6h2c0 4.08-3.06 7.44-7 7.93V20h4v2H8v-2h4v-4.07z"/></svg>\n          </button>\n          ':""}\n          <button class="va-send-btn" id="va-send" aria-label="Envoyer">\n            <svg viewBox="0 0 24 24"><path d="M2.01 21L23 12 2.01 3 2 10l15 2-15 2z"/></svg>\n          </button>\n        </div>\n\n        <div class="va-cta">\n          <a href="/contact.html">Demander un audit gratuit</a>\n        </div>\n      </div>\n    `,document.body.appendChild(e),document.getElementById("va-trigger").addEventListener("click",C),document.getElementById("va-close").addEventListener("click",C),document.getElementById("va-send").addEventListener("click",(()=>{z(document.getElementById("va-input").value)})),document.getElementById("va-input").addEventListener("keypress",(e=>{"Enter"===e.key&&z(e.target.value)})),v&&(function(){if(!v)return;const e=window.SpeechRecognition||window.webkitSpeechRecognition;d=new e,d.lang="fr-FR",d.continuous=!1,d.interimResults=!1,d.onresult=e=>{const n=e.results[0][0].transcript;document.getElementById("va-input").value=n,z(n)},d.onend=()=>{u=!1,document.getElementById("va-mic")?.classList.remove("listening"),document.getElementById("va-trigger").classList.remove("listening")},d.onerror=e=>{console.error("Speech recognition error:",e.error),u=!1,document.getElementById("va-mic")?.classList.remove("listening")}}(),document.getElementById("va-mic").addEventListener("click",k)),setTimeout((()=>{c||function(){const e=document.getElementById("va-trigger"),n=document.createElement("div");n.className="va-notification",n.innerHTML='\n      <div class="va-notif-icon">\n        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">\n          <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/>\n        </svg>\n      </div>\n      <div class="va-notif-text">\n        <span class="va-notif-title">Besoin d\'aide ?</span>\n        <span class="va-notif-sub">Je suis l√† pour vous</span>\n      </div>\n    ',n.style.cssText="\n      position: absolute;\n      bottom: 75px;\n      right: 0;\n      display: flex;\n      align-items: center;\n      gap: 10px;\n      background: rgba(25, 30, 53, 0.95);\n      backdrop-filter: blur(12px);\n      -webkit-backdrop-filter: blur(12px);\n      border: 1px solid rgba(79, 186, 241, 0.3);\n      padding: 12px 16px;\n      border-radius: 12px;\n      box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3), 0 0 20px rgba(79, 186, 241, 0.15);\n      animation: notifSlideIn 0.4s cubic-bezier(0.16, 1, 0.3, 1);\n      cursor: pointer;\n      white-space: nowrap;\n      z-index: 9999;\n    ";const t=n.querySelector(".va-notif-icon");t&&(t.style.cssText="\n        width: 32px;\n        height: 32px;\n        background: linear-gradient(135deg, rgba(79, 186, 241, 0.2) 0%, rgba(16, 185, 129, 0.1) 100%);\n        border-radius: 8px;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        color: #4FBAF1;\n        flex-shrink: 0;\n      ");const a=n.querySelector(".va-notif-text");a&&(a.style.cssText="\n        display: flex;\n        flex-direction: column;\n        gap: 2px;\n      ");const i=n.querySelector(".va-notif-title");i&&(i.style.cssText="\n        font-size: 14px;\n        font-weight: 600;\n        color: #E4F4FC;\n        letter-spacing: -0.01em;\n      ");const s=n.querySelector(".va-notif-sub");s&&(s.style.cssText="\n        font-size: 11px;\n        color: rgba(255, 255, 255, 0.7);\n        font-weight: 400;\n      ");const o=document.createElement("div");o.style.cssText="\n      position: absolute;\n      bottom: -6px;\n      right: 24px;\n      width: 12px;\n      height: 12px;\n      background: rgba(25, 30, 53, 0.95);\n      border-right: 1px solid rgba(79, 186, 241, 0.3);\n      border-bottom: 1px solid rgba(79, 186, 241, 0.3);\n      transform: rotate(45deg);\n    ",n.appendChild(o),e.parentNode.appendChild(n),n.addEventListener("mouseenter",(()=>{n.style.borderColor="rgba(79, 186, 241, 0.6)",n.style.boxShadow="0 8px 32px rgba(0, 0, 0, 0.4), 0 0 30px rgba(79, 186, 241, 0.25)"})),n.addEventListener("mouseleave",(()=>{n.style.borderColor="rgba(79, 186, 241, 0.3)",n.style.boxShadow="0 8px 32px rgba(0, 0, 0, 0.3), 0 0 20px rgba(79, 186, 241, 0.15)"})),n.addEventListener("click",C),setTimeout((()=>{n.style.animation="notifSlideOut 0.3s ease forwards",setTimeout((()=>n.remove()),300)}),6e3)}()}),2e3)}function y(e,n="assistant"){const t=document.getElementById("va-messages"),a=document.createElement("div");a.className=`va-message ${n}`,a.innerHTML=`<div class="va-message-content">${e}</div>`,t.appendChild(a),t.scrollTop=t.scrollHeight,"assistant"===n&&g&&function(e){if(!g)return;p.cancel();const n=new SpeechSynthesisUtterance(e);n.lang="fr-FR",n.rate=1,n.pitch=1,p.speak(n)}(e),m.push({role:"user"===n?"user":"assistant",content:e})}function w(){const e=document.getElementById("va-typing");e&&e.remove()}function k(){d&&(u?d.stop():(d.start(),u=!0,document.getElementById("va-mic").classList.add("listening"),document.getElementById("va-trigger").classList.add("listening")))}async function z(e){if(e.trim()){y(e,"user"),document.getElementById("va-input").value="",function(){const e=document.getElementById("va-messages"),n=document.createElement("div");n.className="va-message assistant",n.id="va-typing",n.innerHTML='<div class="va-message-content"><div class="va-typing"><span></span><span></span><span></span></div></div>',e.appendChild(n),e.scrollTop=e.scrollHeight}();try{const n=await async function(e){const n=e.toLowerCase();if(E.bookingFlow.active){const n=await async function(e){const n=e.toLowerCase(),t=E.bookingFlow;if(n.includes("annuler")||n.includes("non")||n.includes("stop"))return l("voice_booking_cancelled",{step:t.step}),t.active=!1,t.step=null,t.data={name:null,email:null,datetime:null,service:"Consultation"},"Pas de probleme, reservation annulee. Comment puis-je vous aider autrement ?";if("name"===t.step){const n=e.trim();return n.length<2?"Je n'ai pas compris votre nom. Pouvez-vous me le redonner ?":(t.data.name=n,t.step="email","Merci "+n+" ! Quelle est votre adresse email pour recevoir la confirmation ?")}if("email"===t.step){const n=e.trim().toLowerCase();if(!function(e){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)}(n))return"Cette adresse email ne semble pas valide. Pouvez-vous la verifier ? (format: exemple@email.com)";t.data.email=n,t.step="datetime";const a=await async function(){const e=Date.now();if(L.slots.length>0&&e-L.timestamp<q)return L.slots;try{const n=await fetch(j+"?action=availability",{method:"GET",mode:"cors"}),t=await n.json();if(t.success&&t.data&&t.data.slots){const n=t.data.slots.slice(0,6).map((e=>({date:new Date(e.start).toLocaleDateString("fr-FR",{weekday:"long",day:"numeric",month:"long"}),time:e.time,iso:e.start})));return L={slots:n,timestamp:e},n}}catch(e){console.error("Erreur fetch cr√©neaux:",e)}return A()}(),i=a.slice(0,3);return 0===i.length?"Desole, il n'y a pas de creneaux disponibles cette semaine. Envoyez un email a contact@3a-automation.com pour convenir d'un rendez-vous.":"Parfait ! Voici les prochains creneaux disponibles :\n\n"+i.map(((e,n)=>n+1+". "+e.date+" a "+e.time)).join("\n")+"\n\nRepondez avec le numero (1, 2 ou 3) ou proposez une autre date."}if("datetime"===t.step){const e=function(){if(L.slots.length>0)return L.slots.slice(0,3);return A()}();let a=null;return n.includes("1")||n.includes("premier")?a=e[0]:n.includes("2")||n.includes("deux")?a=e[1]:(n.includes("3")||n.includes("trois"))&&(a=e[2]),a?(t.data.datetime=a.iso,t.step="confirm",l("voice_booking_slot_selected",{slot_date:a.date,slot_time:a.time}),"Parfait ! Voici le recapitulatif :\n\nNom: "+t.data.name+"\nEmail: "+t.data.email+"\nDate: "+a.date+" a "+a.time+"\n\nConfirmez-vous ce rendez-vous ? (oui/non)"):"Je n'ai pas compris votre choix. Repondez 1, 2 ou 3 pour choisir un creneau."}if("confirm"===t.step)return n.includes("oui")||n.includes("ok")||n.includes("confirme")?(t.step="submitting",null):"Dites 'oui' pour confirmer ou 'annuler' pour recommencer.";return null}(e);if("submitting"===E.bookingFlow.step)return await async function(){const e=E.bookingFlow,n=function(){if(window.GeoLocale&&"function"==typeof window.GeoLocale.getTimezone)return window.GeoLocale.getTimezone();try{return{iana:Intl.DateTimeFormat().resolvedOptions().timeZone,offset:(new Date).getTimezoneOffset()}}catch(e){return{iana:null,offset:(new Date).getTimezoneOffset()}}}(),t=await async function(e){try{const n=await fetch(j,{method:"POST",mode:"cors",headers:{"Content-Type":"text/plain"},body:JSON.stringify(e)});return await n.json()}catch(e){return console.error("Booking error:",e),{success:!1,message:e.message}}}({name:e.data.name,email:e.data.email,datetime:e.data.datetime,service:e.data.service,phone:"",notes:"Reservation via assistant vocal",timezone:n.iana||`UTC${n.offset>0?"-":"+"}${Math.abs(n.offset/60)}`});return e.active=!1,e.step=null,t.success?(l("voice_booking_completed",{service:e.data.service,datetime:e.data.datetime}),"Votre rendez-vous est confirme ! Vous allez recevoir un email de confirmation a "+e.data.email+".\n\nA bientot !"):(l("voice_booking_failed",{error:t.message}),"Desole, il y a eu un probleme : "+t.message+"\n\nVous pouvez reserver directement sur /booking.html")}();if(n)return n}if(function(e){const n=e.toLowerCase();return S.some((e=>n.includes(e)))}(n))return E.bookingFlow.active=!0,E.bookingFlow.step="name",l("voice_booking_started",{step:"name"}),"Super ! Je vais vous aider a reserver un rendez-vous.\n\nPour commencer, quel est votre nom ?";const t=function(e){const n=e.toLowerCase(),t={btp:["btp","construction","batiment","chantier","artisan","renovation","travaux"],ecommerce:["e-commerce","ecommerce","boutique","shopify","vente en ligne","magasin en ligne"],b2b:["b2b","btob","entreprise","professionnel","corporate","industrie"],saas:["saas","software","application","startup","tech","logiciel"],services:["service","prestataire","consultant","agence","freelance","cabinet"],retail:["retail","magasin","point de vente","commerce"]};for(const[e,a]of Object.entries(t))if(a.some((e=>n.includes(e))))return e;return null}(e);t&&(E.industry=t);const a=function(e){const n=e.toLowerCase(),t={leads:["lead","prospect","client","acquisition","prospection","trouver des clients"],email:["email","mail","newsletter","klaviyo","emailing"],analytics:["analytics","donn√©es","dashboard","rapport","statistiques","ga4"],automation:["automatiser","automatisation","workflow","gagner du temps"],devis:["devis","prix","tarif","combien","co√ªt","budget"]};for(const[e,a]of Object.entries(t))if(a.some((e=>n.includes(e))))return e;return null}(e);a&&(E.need=a);if(B.oui.keywords.some((e=>n.includes(e))))return"processus"===E.lastTopic?"Parfait ! Pour d√©marrer, rendez-vous sur notre page contact :\nüëâ /contact.html\n\nRemplissez le formulaire (5 min) et je vous envoie le rapport sous 24-48h.\n\nDes questions avant de commencer ?":"audit"===E.lastTopic?"Super ! Pour votre audit gratuit :\nüëâ Rendez-vous sur /contact.html\n\nJe vous envoie le rapport avec 3 recommandations sous 24-48h.\n\nüìß Ou envoyez-moi directement un email √† contact@3a-automation.com avec le lien de votre site !":"Excellent ! La prochaine √©tape c'est l'audit gratuit.\n\nüëâ Remplissez le formulaire sur /contact.html\nüìß Ou email: contact@3a-automation.com\n\nJe vous r√©ponds sous 24h !";for(const[e,t]of Object.entries(B))if(t.keywords.some((e=>n.includes(e)))){if(E.lastTopic=e,"leads"===e&&E.industry){const e=P[E.industry];if(e&&e.leads)return e.leads+"\n\nVoulez-vous en savoir plus sur les tarifs ?"}if(t.response)return t.response}if(E.industry){const e=P[E.industry];if(e){if(n.includes("service")||n.includes("automatisation")||n.includes("quoi"))return E.lastTopic="services",e.services+"\n\nQu'est-ce qui vous int√©resse le plus ?";if(!m.some((n=>n.content.includes(e.intro.substring(0,30)))))return e.intro+"\n\nQuel est votre besoin principal ?"}}if("devis"===E.need)return E.lastTopic="pricing",B.pricing.response;if(E.industry)return`Pour votre activit√© ${E.industry.toUpperCase()}, je peux vous proposer plusieurs solutions.\n\nCommen√ßons par l'audit gratuit : je vous envoie un rapport personnalis√© avec 3 recommandations prioritaires sous 24-48h.\n\nüëâ √áa vous int√©resse ?`;return"Pour mieux vous aider, pouvez-vous me dire :\n\n‚Ä¢ Quel est votre secteur d'activit√© ?\n‚Ä¢ Quel est votre besoin principal ? (leads, email, analytics...)\n\nOu si vous pr√©f√©rez, demandez directement l'audit gratuit et je vous recontacte avec des recommandations personnalis√©es !"}(e);w(),y(n,"assistant")}catch(e){w(),y("D√©sol√©, une erreur est survenue. Veuillez r√©essayer ou utiliser le formulaire de contact.","assistant")}}}let E={industry:null,companySize:null,need:null,budget:null,stage:"discovery",lastTopic:null,bookingFlow:{active:!1,step:null,data:{name:null,email:null,datetime:null,service:"Consultation"}}};const j="https://script.google.com/macros/s/AKfycbw9JP0YCJV47HL5zahXHweJgjEfNsyiFYFKZXGFUTS9c3SKrmRZdJEg0tcWnvA-P2Jl/exec",S=["rdv","rendez-vous","rendez vous","reserver","reservation","prendre rdv","booking","appel","discuter","parler"];let L={slots:[],timestamp:0};const q=3e5;function A(){const e=new Date,n=[];for(let t=1;t<=7;t++){const a=new Date(e);a.setDate(e.getDate()+t);const i=a.getDay();if(i>=1&&i<=5&&(a.setHours(10,0,0,0),n.push({date:a.toLocaleDateString("fr-FR",{weekday:"long",day:"numeric",month:"long"}),time:"10:00",iso:a.toISOString()}),n.length>=3))break}return n}const P={btp:{intro:"Pour le BTP, je propose des solutions sp√©cifiques : identification de nouveaux prospects, relances automatiques de devis, et demandes d'avis post-travaux.",services:"Automatisations BTP :\n‚Ä¢ Identification prospects locaux\n‚Ä¢ Veille opportunit√©s automatique\n‚Ä¢ Relances devis programm√©es\n‚Ä¢ Emails satisfaction post-travaux\n‚Ä¢ Collecte avis clients automatique",leads:"Pour g√©n√©rer des leads BTP, j'identifie automatiquement les opportunit√©s dans votre zone et je qualifie les prospects selon vos crit√®res."},b2b:{intro:"Pour le B2B, je me concentre sur la qualification automatique des leads et les s√©quences de nurturing pour convertir les prospects en clients.",services:"Automatisations B2B :\n‚Ä¢ Lead scoring automatique\n‚Ä¢ S√©quences nurturing personnalis√©es\n‚Ä¢ Synchronisation CRM\n‚Ä¢ Alertes commerciales temps r√©el\n‚Ä¢ Qualification automatique",leads:"Pour la g√©n√©ration de leads B2B, je configure des workflows de capture et qualification automatique. Les leads chauds d√©clenchent des alertes en temps r√©el."},ecommerce:{intro:"Pour l'e-commerce, j'optimise tout le parcours client : de l'acquisition √† la fid√©lisation, en passant par la r√©cup√©ration des paniers abandonn√©s.",services:"Automatisations e-commerce :\n‚Ä¢ R√©cup√©ration paniers abandonn√©s\n‚Ä¢ Welcome series nouveaux clients\n‚Ä¢ Post-achat pour fid√©liser\n‚Ä¢ Alertes retour en stock\n‚Ä¢ R√©activation clients dormants",leads:"Pour l'e-commerce, je configure les flows de conversion pour transformer les visiteurs en acheteurs et maximiser la valeur client."},saas:{intro:"Pour les SaaS, je configure l'onboarding automatis√©, la pr√©vention du churn, et les emails pour maximiser l'adoption et la r√©tention.",services:"Automatisations SaaS :\n‚Ä¢ Onboarding s√©quenc√©\n‚Ä¢ Pr√©vention churn proactive\n‚Ä¢ Adoption des fonctionnalit√©s\n‚Ä¢ Collecte feedback automatique\n‚Ä¢ Upsell intelligent"},services:{intro:"Pour les prestataires de services, j'automatise la prospection, les rappels rendez-vous, et les demandes de t√©moignages post-mission.",services:"Automatisations services :\n‚Ä¢ Prospection automatis√©e\n‚Ä¢ Nurturing leads longs\n‚Ä¢ Rappels rendez-vous\n‚Ä¢ Demandes de t√©moignages\n‚Ä¢ Suivi administratif"}},B={processus:{keywords:["processus","comment √ßa marche","fonctionnement","√©tapes","d√©roulement","explique"],response:"Voici comment √ßa se passe :\n\n1Ô∏è‚É£ **Formulaire diagnostic** (5 min)\nVous me d√©crivez votre activit√© et vos objectifs\n\n2Ô∏è‚É£ **Rapport personnalis√©** (24-48h)\nJe vous envoie 3 recommandations prioritaires\n\n3Ô∏è‚É£ **Proposition sur mesure** \nSi √ßa vous int√©resse, devis d√©taill√© adapt√© √† vos besoins\n\n4Ô∏è‚É£ **Impl√©mentation cl√© en main**\nJe configure tout, vous n'avez rien √† faire de technique\n\n‚úÖ Pas d'appel obligatoire, tout par √©crit si vous pr√©f√©rez !"},pricing:{keywords:["prix","tarif","combien","co√ªt","budget","devis","cher"],response:"Nos tarifs sont forfaitaires, sans surprise :\n\n**PACKS ONE-TIME:**\nDu projet ponctuel au d√©ploiement complet\n\n**RETAINERS MENSUELS:**\nMaintenance et optimisation continue\n\nüí° L'audit est GRATUIT et vous aide √† choisir le pack adapt√© √† vos besoins.\n\nüëâ Consultez nos tarifs sur /pricing.html ou demandez un devis personnalis√© !"},audit:{keywords:["audit","gratuit","diagnostic","analyse"],response:"L'audit est 100% gratuit !\n\nüìã **Ce que vous recevez:**\n‚Ä¢ Analyse de vos processus actuels\n‚Ä¢ Opportunit√©s d'automatisation identifi√©es\n‚Ä¢ Estimation du ROI potentiel\n‚Ä¢ Recommandations personnalis√©es\n\n‚è±Ô∏è **D√©lai:** 24-48h apr√®s le formulaire\n\nüëâ Voulez-vous que je vous envoie le lien du formulaire ?"},automatisations:{keywords:["automatisation","automatisations","workflow","flows","quoi automatiser"],response:"Je propose un large catalogue d'automatisations :\n\nüìß **Email Marketing:**\nWelcome, Abandon panier, Post-achat, Winback\n\nüéØ **Lead Generation:**\nCapture, Scoring, Qualification, Nurturing\n\nüìä **Analytics:**\nDashboards, Alertes, Rapports automatiques\n\nüõí **E-commerce:**\nSync produits, Alertes stock, Reviews\n\nü§ñ **AI & Video:**\nVid√©os marketing, Avatar IA, Voix IA\n\nQuel type vous int√©resse le plus ?"},leads:{keywords:["lead","prospect","client","acquisition","trouver des clients"],response:null},difference:{keywords:["diff√©rence","pourquoi vous","agence","freelance","avantage"],response:"Ce qui me diff√©rencie :\n\n‚úÖ **Consultant expert, pas agence**\nVous travaillez directement avec l'expert, pas un commercial\n\n‚úÖ **Prix justes**\nPas de marge agence\n\n‚úÖ **Sp√©cialisation**\nExpert automation marketing - pas g√©n√©raliste\n\n‚úÖ **R√©sultats mesurables**\nROI prouv√© sur chaque projet\n\n‚úÖ **Flexibilit√©**\nPas d'engagement long terme obligatoire"},garantie:{keywords:["garantie","risque","marche pas","satisfait"],response:"Ma garantie est simple :\n\nüîí **Satisfait ou on it√®re**\nSi les automatisations ne fonctionnent pas comme pr√©vu, je corrige jusqu'√† satisfaction.\n\nüìù **Documentation compl√®te**\nVous gardez le contr√¥le, m√™me sans moi.\n\nüö™ **Pas d'engagement**\nLes packs sont one-time. Les abonnements sont r√©siliables √† tout moment.\n\nVoulez-vous commencer par l'audit gratuit pour voir le potentiel ?"},delai:{keywords:["d√©lai","temps","quand","combien de temps","dur√©e"],response:"Les d√©lais varient selon le projet :\n\n‚ö° **Projet simple:** 48-72h\nüì¶ **Projet standard:** 5-7 jours\nüöÄ **Projet complet:** 10-14 jours\n\nüìã **Audit gratuit:** 24-48h\n\nCes d√©lais incluent les r√©visions. Possibilit√© d'acc√©l√©rer si urgence."},oui:{keywords:["oui","d'accord","ok","allons-y","int√©ress√©","je veux"],response:null},non:{keywords:["non","pas maintenant","plus tard","je r√©fl√©chis"],response:"Pas de probl√®me ! Prenez votre temps. \n\nSi vous changez d'avis, l'audit gratuit reste disponible. Vous pouvez aussi m'envoyer un email √† contact@3a-automation.com.\n\nüìå Et n'h√©sitez pas √† revenir ici si vous avez d'autres questions !"},salutations:{keywords:["bonjour","salut","hello","hi","coucou","bonsoir"],response:"Bonjour ! üëã Je suis l'assistant 3A Automation.\n\nJe peux vous aider √† :\n‚Ä¢ Automatiser votre marketing (emails, leads)\n‚Ä¢ Comprendre nos services\n‚Ä¢ Obtenir un audit gratuit\n\nQuel est votre secteur d'activit√© ?"},remerciements:{keywords:["merci","super","g√©nial","parfait","excellent"],response:"Avec plaisir ! üòä\n\nSi vous √™tes pr√™t √† passer √† l'action, je vous recommande de demander l'audit gratuit - c'est le meilleur moyen de voir concr√®tement ce qu'on peut faire pour vous.\n\nüìß Autre question ? Je suis l√† !"}};function C(){c=!c;const t=document.getElementById("va-panel");if(c){if(t.classList.add("open"),0===m.length){y(h?n:e,"assistant")}document.getElementById("va-input").focus()}else t.classList.remove("open"),p&&p.cancel()}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",x):x()}();